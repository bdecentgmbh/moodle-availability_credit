YUI.add("moodle-availability_credit-form",function(e,t){M.availability_credit=M.availability_credit||{},M.availability_credit.form=e.Object(M.core_availability.plugin),M.availability_credit.form.initInner=function(e){this.currencies=e},M.availability_credit.form.getNode=function(t){var n="",r="";for(var i in this.currencies)t.currency===i?n=' selected="selected" ':n="",r+='<option value="'+i+'" '+n+" >",r+=this.currencies[i],r+="</option>";var s="<div><label>";s+=M.util.get_string("businessemail2","availability_credit"),s+='<input name="businessemail" type="email" /></label></div>',s+="<div><label>",s+=M.util.get_string("currency","availability_credit"),s+='<select name="currency" />'+r+"</select></label></div>",s+="<div><label>",s+=M.util.get_string("cost","availability_credit"),s+='<input name="cost" type="text" /></label></div>',s+="<div><label>",s+=M.util.get_string("itemname","availability_credit"),s+='<input name="itemname" type="text" /></label></div>',s+="<div><label>",s+=M.util.get_string("itemnumber","availability_credit"),s+='<input name="itemnumber" type="text" /></label></div>';var o=e.Node.create("<span>"+s+"</span>");t.businessemail&&o.one("input[name=businessemail]").set("value",t.businessemail),t.cost&&o.one("input[name=cost]").set("value",t.cost),t.itemname&&o.one("input[name=itemname]").set("value",t.itemname),t.itemnumber&&o.one("input[name=itemnumber]").set("value",t.itemnumber);if(!M.availability_credit.form.addedEvents){M.availability_credit.form.addedEvents=!0;var u=e.one(".availability-field");u.delegate("change",function(){M.core_availability.form.update()},".availability_credit select[name=currency]"),u.delegate("change",function(){M.core_availability.form.update()},".availability_credit input")}return o},M.availability_credit.form.fillValue=function(e,t){e.businessemail=t.one("input[name=businessemail]").get("value"),e.currency=t.one("select[name=currency]").get("value"),e.cost=this.getValue("cost",t),e.itemname=t.one("input[name=itemname]").get("value"),e.itemnumber=t.one("input[name=itemnumber]").get("value")},M.availability_credit.form.getValue=function(e,t){var n=t.one("input[name="+e+"]").get("value");if(!/^[0-9]+([.,][0-9]+)?$/.test(n))return n;var r=parseFloat(n.replace(",","."));return r},M.availability_credit.form.fillErrors=function(e,t){var n={};this.fillValue(n,t),n.businessemail===""&&e.push("availability_credit:error_businessemail"),(n.cost!==undefined&&typeof n.cost=="string"||n.cost<=0)&&e.push("availability_credit:error_cost"),n.itemname===""&&e.push("availability_credit:error_itemname"),n.itemnumber===""&&e.push("availability_credit:error_itemnumber")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
